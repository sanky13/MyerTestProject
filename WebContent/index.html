<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8"/>
	
	<!--jQuery-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
	
  <!--dust-->
  <!--<script src="https://raw.github.com/linkedin/dustjs/master/dist/dust-full-1.1.1.js" type="text/javascript" charset="utf-8"></script>-->
  <script src="js/dust-full-1.2.0.js"></script>
  
</head>
<body>
<div id="main"></div>
</body>

<!--MAKE SURE TEMPLATES GET INCLUDED BEFORE CODE SCRIPTS-->
<!--FOOD TEMPLATE-->
<script type="text/x-template" id="food-tpl">
	<h1>{name|j}</h1>
	<b>{favorite_food}</b>
  <select>
    {#food_options}
      <option value="{id}">{id} - {value}</option>
    {/food_options}
  </select>
</script>

<!--FOOD TEMPLATE-->
<!--
THIS ONE IS ERRORING - not sure why
I was trying to set the selected value of the select box based on the value of the favorite_food property 
<script type="text/x-template" id="food-tpl">
	<h1>{name}</h1>
  <select>
    {#food_options}
      <option value="{id}"{@eq key=id value=favorite_food}  selected="true"{/eq} >
       {value}
      </option>
    {/food_options}
  </select>
</script>
-->


<script>
		
(function($){
	
  var data = {
    "name": "SOME NAME",
    "favorite_food": 1,
    "food_options": [
	    
      {id:1, value: "Ice Cream"},
      {id:2, value: "Pizza"},
      {id:3, value: "Fish"}
     ]
  };
  
	// Set up and compile the Dust.js template
	var foodTpl = dust.compile($("#food-tpl").html(),"foodTpl");
	dust.loadSource(foodTpl);
	
  
  /*
  // you could render the template like this
  
  dust.render("foodTpl", data, function(err, res){
    $("#main").append(res);
  });
  
  */
  
  // Or, if you use backbone, you could create a template function
  // to pass into a Backbone.View (as the 'template' param
  var template = function(foodData) {
		var result;
		dust.render("foodTpl", foodData, function(err, res) {
			result = res;
		});
		return result;
	};
  
  // render the template
  $("#main").append(template(data));
	
})(jQuery);
	
</script>


</html>